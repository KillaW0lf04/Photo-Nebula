{% extends "base.html" %}

{% block content %}
 <div class="container-fluid" style="padding: 10px">
    <div class="row-fluid">
        <div class="span8">
            <div style="float: right; margin: 0 auto; width: 100%">
                <div class="form-inline" style="padding: 10px">
                    <a href="/album/{{ album.key.integer_id() }}/view" class="btn btn-primary">
                        <span class="glyphicon glyphicon-circle-arrow-left"></span>
                        Back to Album
                    </a>
                    {% if user.key == photo.author %}
                        <button class="btn btn-danger"
                                data-toggle="modal"
                                data-target="#myModal">
                            <span class="glyphicon glyphicon-trash"></span>
                            Delete Photo
                        </button>
                    {% endif %}
                </div>
                <img id="photo" width="1000" src="{{ image_url }}" />
                <div class="form-inline" style="padding: 10px">
                    <label>
                        <span class="glyphicon glyphicon-link"></span>
                        Static Url
                    </label>
                    <input id="staticUrl"
                           class="form-control"
                           type="text"
                           style="width: 500px"
                           readonly="true"
                           value="{{ image_url }}"/>
                </div>
            </div>
        </div>
        <div class="span4" style="padding: 10px">
            <div>
                <b>{{ photo.name }}</b> by <b>{{ photo.author.get().email }}</b> on <b>{{ photo.date_created }}</b>
            </div>
            <div id="comments" class="container">
                    <label>Comments left by Users</label>

                    {% for comment in comments %}
                        <div class="comment">
                            <blockquote>
                                {{ comment.text }}
                                <small><cite title="Source Title">{{ comment.author.get().email }}</cite></small>
                            </blockquote>
                        </div>
                    {% endfor %}
                </div>

                <form method="post" action="/album/{{ album.key.integer_id() }}/photo/{{ photo.key.integer_id() }}/add-comment">
                    <label>
                        <span class="glyphicon glyphicon-comment"></span>
                        Leave a Comment
                    </label>
                    <textarea class="form-control" id="comment_text" name="comment_text">

                    </textarea>

                    <br>
                    <button type="submit" class="btn btn-primary">Submit</button>
                    <button type="reset" class="btn btn-default">Clear</button>
                </form>
        </div>
    </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Confirm Photo Deletion</h4>
          </div>
          <div class="modal-body">
            <p>Are you sure you would like to delete this photo?</p>
            <blockquote>
                <b>{{ photo.name }}</b>
            </blockquote>
            <p>You will <b>not</b> be able to undo your changes</p>
          </div>
          <form method="post"
                action="/album/{{ album.key.integer_id() }}/photo/{{ photo.key.integer_id() }}/delete"
                class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">No, Don't Delete</button>
            <button type="submit" class="btn btn-danger">Yes, Delete!</button>
          </form>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</div>


<script type="text/javascript">
    $('#staticUrl').focus(function() {
        this.select();
    });
</script>
{% endblock %}